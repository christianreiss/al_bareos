Client {
  Name     = rinux.net-fd
  Address  = "10.1.0.20"
  FDPort   = 9102
  Catalog  = MySQL
  Password = "fd-bacula.int.alpha-labs.net-UbfRj2LjxXd3Po1kMeM2529ydUv1xg8z529576674710"
}

Console {
  Name        = "rinux.net-console"
  Password    = "fd-bacula.int.alpha-labs.net-UbfRj2LjxXd3Po1kMeM2529ydUv1xg8z529576674710"
  JobACL      = "rinux.net - backup", "rinux.net - restore"
  ClientACL   = "rinux.net-fd"
  StorageACL  = "storage-rinux.net"
  ScheduleACL = "rinux.net"
  PoolACL     = "rinux.net-hourly", "rinux.net-daily", "rinux.net-monthly"
  FileSetACL  = "FileSet-rinux.net", "default"
  CatalogACL  = MySQL
  CommandACL  = run, restore, status
  WhereACL    = "/"
}

Job {
  Name                     = "rinux.net - backup"
  Enabled                  = yes
  FileSet                  = "FileSet-rinux.net"
  Level                    = Incremental
  Max Start Delay          = 2700
  Maximum Concurrent Jobs  = 1
  Rerun Failed Levels      = no
  Messages  = "rinux.net-messages"
  Reschedule On Error      = no
  Schedule                 = "rinux.net"
  Write Bootstrap          = "/bareos/bootstraps/rinux.net.bsr"
  client                   = "rinux.net-fd"
  pool                     = "rinux.net-hourly"
  Full Backup Pool         = "rinux.net-monthly"
  Differential Backup Pool = "rinux.net-daily"
  Incremental Backup Pool  = "rinux.net-hourly"
  Max Full Interval        = 31 days
  storage                  = "storage-rinux.net"
  type                     = backup
  Allow Duplicate Jobs     = no
  Allow Mixed Priority     = yes
  Priority                 = 50
  Prune Files              = yes
  Prune Volumes            = yes
  Prune Jobs               = yes
  Accurate                 = true
}

Job {
  Name      = "rinux.net - restore"
  Bootstrap = "/backup/bacula/bootstraps/rinux.net.bsr"
  FileSet   = "FileSet-rinux.net"
  Messages  = "rinux.net-messages"
  Pool      = "rinux.net-hourly"
  Replace   = Always
  Storage   = "storage-rinux.net"
  Type      = Restore
  Where     = /bacula-restores
  client    = "rinux.net-fd"
}

Schedule {
  Name = "rinux.net"
  Run  = Level=Incremental Pool=rinux.net-hourly FullPool=rinux.net-monthly hourly
  Run  = Level=Differential Pool=rinux.net-daily FullPool=rinux.net-monthly daily at 4:30
  Run  = Level=Full Pool=rinux.net-monthly on 1 at 4:30
}

Storage {
  Address                 = 10.1.0.2
  Device                  = storage-rinux.net
  Media Type              = File
  Name                    = storage-rinux.net
  Password                = "KuEYrTyAqAEDyHEcH2W4114z0aO6p4d3ggLduxT9H3uRJTRwDIzsWdz2XkuzjOZf"
  SDPort                  = 9103
  maximum concurrent jobs = 5
}

Pool {
  Name                  = rinux.net-hourly
  Pool Type             = Backup
  Maximum Volume Jobs   = 1
  Catalog Files         = yes
  Recycle               = yes
  AutoPrune             = yes
  Volume Retention      = 1 days
  Recycle Oldest Volume = yes
  Label Format          = rinux-hourly-
  Maximum Volumes       = 48
}

Pool {
  Name                  = rinux.net-daily
  Pool Type             = Backup
  Maximum Volume Jobs   = 1
  Catalog Files         = yes
  Recycle               = yes
  AutoPrune             = yes
  Volume Retention      = 31 days
  Recycle Oldest Volume = yes
  Label Format          = rinux-daily-
  Maximum Volumes       = 32
}

Pool {
  Name                  = rinux.net-monthly
  Pool Type             = Backup
  Maximum Volume Jobs   = 1
  Catalog Files         = yes
  Recycle               = yes
  AutoPrune             = yes
  Volume Retention      = 90 days
  Recycle Oldest Volume = yes
  Label Format          = rinux-monthly-
  Maximum Volumes       = 4
}

FileSet {
    Name = "FileSet-rinux.net"
    Ignore Fileset Changes = yes
    Include {
        Options {
            sparse= yes

            wildfile = *.tmp
            wildfile = *.bak
            wildfile = *~
            wilddir  = /home/*/log
            wilddir  = /home/*/.spamassassin
            wilddir  = /home/*/.razor
            wilddir  = /home/*/tmp
            exclude  = yes
        }
        File = /backup
        File = /bin
        File = /boot
        File = /etc
        File = /lib32
        File = /lib64
        File = /root
        File = /var
        File = /home
    }
    Exclude {
        File = /etc/hosts.deny
        File = /mnt
        File = /proc
        File = /root/.razor
        File = /tmp
        File = /usr/portage
        File = /usr/tmp
        File = /var/amavis
        File = /var/cache
        File = /var/lib/clamav
        File = /var/lib/denyhosts
        File = /var/lib/mailman/logs
        File = /var/lib/mysql
        File = /var/lib/slocate
        File = /var/log
        File = /var/spool/postfix
        File = /var/tmp
        File = /var/www/team17.rinux.net
        File = /var/www/stuff.rinux.net
        File = /var/www/jukebox.rinux.net/media
    }
}

Messages {
    Name            = "rinux.net-messages"
    append          = "/var/log/bareos/rinux.net.log" = all, !skipped, !saved, !restored
    mailcommand     = "/usr/sbin/bsmtp -f \"\(Bareos\) %r\" -s \"Bareos: %t %e of %c %l\" %r"
    operatorcommand = "/usr/sbin/bsmtp -f \"\(Bareos\) %r\" -s \"Bareos: Aiieeee for %j\" %r"
    mail            = email@clemens-renner.de = error, !skipped, !restored, !saved, !notsaved
    operator        = email@clemens-renner.de = mount
    console         = error, !skipped, !saved, !restored
}
